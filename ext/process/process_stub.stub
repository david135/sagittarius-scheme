;; -*- scheme -*-
(decl-code
 (.if "defined(_WIN32)"
      (.include <windows.h>)
      (.include <sys/types.h>
		<unistd.h>))

 (.include <sagittarius.h>)
 (.define "LIBSAGITTARIUS_EXT_BODY")
 (.include <sagittarius/extend.h>))

(define-c-proc getpid () ::<fixnum>
  (.if "defined(_WIN32)"
       (result (GetCurrentProcessId()))
       (result (getpid))))
